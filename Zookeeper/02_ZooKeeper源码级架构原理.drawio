<mxfile host="www.draw.io" modified="2020-03-10T03:18:16.105Z" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/75.0.3770.142 Safari/537.36" etag="GXRZkEJPDvrpz425zajX" version="12.8.2" type="github">
  <diagram id="Rla-V4ZRtTpuWLyhE8ta" name="第 1 页">
    <mxGraphModel dx="3137" dy="783" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-178" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=-0.001;exitY=0.686;exitDx=0;exitDy=0;exitPerimeter=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-5" target="WYC8DpWCvw_BZ1jIHr_j-126">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-460" y="946" />
              <mxPoint x="-460" y="946" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-179" value="leader选举&lt;br&gt;根据zxid和myid来选举" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-178">
          <mxGeometry x="0.033" y="21" relative="1" as="geometry">
            <mxPoint x="21" y="-18" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-5" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-475" y="40" width="1120" height="1320" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-6" value="ZooKeeper进程&lt;br&gt;（myid=0）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="85" y="50" width="125" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-7" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="145" y="135" width="490" height="445" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-8" value="ZooKeeperServer" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="320" y="140" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-9" value="FinalRequestProcessor&lt;br&gt;（处理逻辑）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="165" y="180" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-29" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-10" target="WYC8DpWCvw_BZ1jIHr_j-12">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-30" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-10" target="WYC8DpWCvw_BZ1jIHr_j-9">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-10" value="SyncRequestProcessor&lt;br&gt;（线程）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="165" y="250" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-27" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-11" target="WYC8DpWCvw_BZ1jIHr_j-13">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-28" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-11" target="WYC8DpWCvw_BZ1jIHr_j-12">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="230" y="310" />
              <mxPoint x="400" y="310" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-11" value="PreRequestProcessor&lt;br&gt;（线程）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="165" y="320" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-12" value="queueRequests&lt;br&gt;（队列）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="335" y="250" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-13" value="submittedRequests&lt;br&gt;（队列）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="335" y="320" width="130" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-22" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-14" target="WYC8DpWCvw_BZ1jIHr_j-21">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-14" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="165" y="400" width="290" height="150" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-16" value="分桶数据结构&lt;br&gt;&amp;lt;expireTime, SessionSet&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="230" y="440" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-17" value="核心数据结构&lt;br&gt;&amp;lt;sessionId, SessionImpl&amp;gt;" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="230" y="500" width="160" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-24" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-21" target="WYC8DpWCvw_BZ1jIHr_j-14">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="540" y="438" />
              <mxPoint x="485" y="438" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-25" value="touch" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-24">
          <mxGeometry x="0.3906" y="-1" relative="1" as="geometry">
            <mxPoint x="11.48" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-26" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-21" target="WYC8DpWCvw_BZ1jIHr_j-13">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="565" y="390" />
              <mxPoint x="400" y="390" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-21" value="submitRequest&lt;br&gt;提交请求" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="515" y="447.5" width="100" height="55" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-31" value="ZKDatabase&lt;br&gt;内存数据库" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="505" y="310" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-32" value="FileTxnSnapLog&lt;br&gt;磁盘数据管理组件" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="505" y="230" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-33" value="DatadirCleanupManager&lt;br&gt;数据清理组件" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-425" y="135" width="530" height="175" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-34" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-425" y="330" width="530" height="250" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-35" value="NIOServerCnxnFactory&lt;br&gt;网络连接工厂" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-230" y="347.5" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-115" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-36">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-495" y="426.5000000000002" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-36" value="ServerSocketChannel" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-405" y="405.5" width="140" height="42" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-37" value="SocketChannel" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-405" y="480" width="140" height="42" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-39" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-38" target="WYC8DpWCvw_BZ1jIHr_j-36">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-240" y="450" />
              <mxPoint x="-240" y="427" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-40" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-38" target="WYC8DpWCvw_BZ1jIHr_j-37">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-240" y="470" />
              <mxPoint x="-240" y="501" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-38" value="Selector" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-230" y="438" width="100" height="42" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-41" value="SocketChannels&lt;br&gt;（Set数据结构）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-55" y="387.5" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-43" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-42" target="WYC8DpWCvw_BZ1jIHr_j-38">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-44" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.5;exitDx=0;exitDy=0;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-42" target="WYC8DpWCvw_BZ1jIHr_j-14">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-45" value="会话管理" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-44">
          <mxGeometry x="-0.3245" y="6" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-42" value="Thread&lt;br&gt;（核心网络线程）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-55" y="490" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-47" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-46" target="WYC8DpWCvw_BZ1jIHr_j-16">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="410" y="420" />
              <mxPoint x="410" y="460" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-48" value="expire" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-47">
          <mxGeometry x="0.3999" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-46" value="SessionTracker&lt;br&gt;（线程）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="261.25" y="405" width="97.5" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-49" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-425" y="710" width="1050" height="610" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-50" value="QuorumPeer&lt;br&gt;（线程）" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="55" y="720" width="115" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-78" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-51" target="WYC8DpWCvw_BZ1jIHr_j-77">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-80" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-51" target="WYC8DpWCvw_BZ1jIHr_j-79">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-51" value="Follower&lt;br&gt;（核心组件）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-350" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-140" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-52" target="WYC8DpWCvw_BZ1jIHr_j-138">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-141" value="建立TCP连接" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-140">
          <mxGeometry x="0.2624" y="3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-144" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.75;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-52" target="WYC8DpWCvw_BZ1jIHr_j-121">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-135" y="765" />
              <mxPoint x="-669" y="765" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-145" value="follower注册&lt;br&gt;1.8 proposal ACL" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-144">
          <mxGeometry x="-0.1255" y="-2" relative="1" as="geometry">
            <mxPoint x="9" y="-3" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-52" value="Socket" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-320" y="780" width="60" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-54" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-53" target="WYC8DpWCvw_BZ1jIHr_j-34">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-53" value="ServerCnxnFactory" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-145" y="740" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-55" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-350" y="920" width="415" height="360" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-56" value="QuorumCnxManager&lt;br&gt;zk集群通信组件" style="text;html=1;strokeColor=#d6b656;fillColor=#fff2cc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-201" y="930" width="117" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-57" value="Listener&lt;br&gt;请求监听器" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-297.5" y="980" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-58" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-335" y="1060" width="190" height="170" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-59" value="SendWorkerMap" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-292.5" y="1070" width="110" height="35" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-62" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.5;exitY=1;exitDx=0;exitDy=0;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-60" target="WYC8DpWCvw_BZ1jIHr_j-61">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-184" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-60">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-531" y="1125" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-60" value="SendWorker" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-292.5" y="1110" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-67" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-61" target="WYC8DpWCvw_BZ1jIHr_j-65">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-61" value="RecvWorker" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-292.5" y="1169" width="110" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-66" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-63" target="WYC8DpWCvw_BZ1jIHr_j-60">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-63" value="queueSendMap" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-105" y="1102.5" width="130" height="45" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-73" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-65" target="WYC8DpWCvw_BZ1jIHr_j-68">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-65" value="recvQueue" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-105" y="1161.5" width="130" height="45" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-75" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=1;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-68" target="WYC8DpWCvw_BZ1jIHr_j-55">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-76" value="和其他机器&lt;br&gt;建立连接" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-75">
          <mxGeometry x="-0.2422" y="-9" relative="1" as="geometry">
            <mxPoint x="-9" y="-9" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-68" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="240" y="980" width="265" height="170" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-69" value="FastLeaderElection&lt;br&gt;选举算法" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="300" y="987.5" width="145" height="55" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-72" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-71" target="WYC8DpWCvw_BZ1jIHr_j-63">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="373" y="1125" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-71" value="sendQueue" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="305" y="1062.5" width="135" height="50" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-85" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-77" target="WYC8DpWCvw_BZ1jIHr_j-84">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="685" y="830" as="targetPoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-86" value="1.13 写到内存数据库" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-85">
          <mxGeometry x="0.24" y="-2" relative="1" as="geometry">
            <mxPoint x="-1" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-77" value="FinalProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="300" y="800" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-82" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-79" target="WYC8DpWCvw_BZ1jIHr_j-81">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="685" y="660" as="targetPoint" />
            <Array as="points">
              <mxPoint x="193" y="660" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-83" value="1.6 写事物日志&lt;br&gt;1.7 执行flush操作" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-82">
          <mxGeometry x="0.0987" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-79" value="SyncRequestProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="125" y="800" width="135" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-81" value="磁盘上的事物日志&lt;br&gt;log.xxxxxx" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="630" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-84" value="ZkDatabase" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="700" y="800" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-87" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1380" y="116.25" width="660" height="502.5" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-88" value="ZooKeeper&lt;br&gt;（客户端）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-1098.5" y="134.25" width="97" height="43" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-89" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1360" y="178.75" width="610" height="430" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-90" value="ClientCnxn" style="text;html=1;strokeColor=#b85450;fillColor=#f8cecc;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-1088.25" y="193.25" width="76.5" height="38" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-112" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;entryX=0.75;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-93" target="WYC8DpWCvw_BZ1jIHr_j-106">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-113" value="请求排队" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-112">
          <mxGeometry x="0.0763" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-93" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1020" y="250.75" width="242" height="258" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-94" value="SendThread" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-944" y="258.75" width="90" height="35" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-95" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1001.5" y="298.75" width="211.5" height="200" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-96" value="ClientCnxnSocket" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-964" y="308.75" width="130" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-101" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-97" target="WYC8DpWCvw_BZ1jIHr_j-100">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-97" value="Selector" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-949" y="352.5" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-103" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=1;exitY=0.25;exitDx=0;exitDy=0;entryX=1.005;entryY=0.397;entryDx=0;entryDy=0;entryPerimeter=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-100" target="WYC8DpWCvw_BZ1jIHr_j-102">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-770" y="426.75" />
              <mxPoint x="-770" y="214.75" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-104" value="更新会话信息" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-103">
          <mxGeometry x="0.6111" y="1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-116" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-100" target="WYC8DpWCvw_BZ1jIHr_j-114">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-117" value="建立TCP长连接&lt;br&gt;发送ConnectRequest请求&lt;br&gt;定时发送Ping请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-116">
          <mxGeometry x="0.1242" y="-1" relative="1" as="geometry">
            <mxPoint x="22.76" y="-1.03" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-100" value="SocketChannel" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-949" y="418.75" width="100" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-102" value="session&lt;br&gt;会话信息" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-954" y="198.75" width="110" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-105" value="EventThread" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-959" y="528.75" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-108" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=1;exitDx=0;exitDy=0;entryX=0.25;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-106" target="WYC8DpWCvw_BZ1jIHr_j-107">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-109" value="待响应" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-108">
          <mxGeometry x="0.27" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-110" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-106" target="WYC8DpWCvw_BZ1jIHr_j-100">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1210" y="398.75" />
              <mxPoint x="-1029" y="398.75" />
              <mxPoint x="-1029" y="433.75" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-111" value="发送请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-110">
          <mxGeometry x="0.0603" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-106" value="outgoingQueue&lt;br&gt;（待发送队列）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1310" y="258.75" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-107" value="pendingQueue&lt;br&gt;（待响应队列）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1310" y="418.75" width="200" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-114" value="2181&lt;br&gt;端口号" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-550" y="406" width="110" height="41" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-118" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-37" target="WYC8DpWCvw_BZ1jIHr_j-100">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-699" y="441" as="targetPoint" />
            <Array as="points">
              <mxPoint x="-680" y="501" />
              <mxPoint x="-680" y="441" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-119" value="发送响应" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-118">
          <mxGeometry x="0.0061" relative="1" as="geometry">
            <mxPoint x="-150" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-134" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.25;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-120" target="WYC8DpWCvw_BZ1jIHr_j-128">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-135" value="1.10 执行commit" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-134">
          <mxGeometry x="0.3565" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-120" value="LearnerHandler&lt;br&gt;（线程）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-806" y="765" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-142" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.25;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-121" target="WYC8DpWCvw_BZ1jIHr_j-52">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-143" value="初始化数据同步&lt;br&gt;1.4 发送proposal请求&lt;br&gt;1.9 发送commit请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-142">
          <mxGeometry x="-0.2574" y="-2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-121" value="Socket" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-699" y="785" width="40" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-123" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;exitX=0.5;exitY=0;exitDx=0;exitDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-122" target="WYC8DpWCvw_BZ1jIHr_j-121">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-125" value="发送数据" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-123">
          <mxGeometry x="0.2476" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-122" value="数据同步线程" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-784" y="750" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-146" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-126" target="WYC8DpWCvw_BZ1jIHr_j-131">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-172" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-126" target="WYC8DpWCvw_BZ1jIHr_j-171">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-173" value="leader选举&lt;br&gt;根据zxid和myid来选举" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-172">
          <mxGeometry x="0.1569" y="2" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-126" value="" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-730" y="900" width="140" height="90" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-129" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-127" target="WYC8DpWCvw_BZ1jIHr_j-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-130" value="1.2 同步" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-129">
          <mxGeometry x="-0.1948" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-133" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-127" target="WYC8DpWCvw_BZ1jIHr_j-128">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-151" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-127" target="WYC8DpWCvw_BZ1jIHr_j-150">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-127" value="ProposalRequestProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1110" y="805" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-154" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-128" target="WYC8DpWCvw_BZ1jIHr_j-153">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-157" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.75;exitDx=0;exitDy=0;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-128" target="WYC8DpWCvw_BZ1jIHr_j-156">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-158" value="1.1 等待" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-157">
          <mxGeometry x="0.2" y="-3" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-128" value="CommitProccessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1110" y="700" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-132" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-131" target="WYC8DpWCvw_BZ1jIHr_j-127">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-148" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-131" target="WYC8DpWCvw_BZ1jIHr_j-147">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-149" value="封装请求" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-148">
          <mxGeometry x="0.1733" y="-1" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-131" value="PreRequestProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1110" y="880" width="180" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-136" value="LearnerCnxAcceptor&lt;br&gt;（线程）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-717" y="910" width="114" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-137" value="ZooKeeper进程&lt;br&gt;（myid=1）" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;" vertex="1" parent="1">
          <mxGeometry x="-705" y="955" width="90" height="25" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-139" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0.25;exitY=0;exitDx=0;exitDy=0;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-138" target="WYC8DpWCvw_BZ1jIHr_j-120">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-138" value="ServerSocket" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-705" y="886.5" width="90" height="27" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-147" value="outstandingChange" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1380" y="885" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-167" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-150" target="WYC8DpWCvw_BZ1jIHr_j-166">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-150" value="ProposalRequestProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1390" y="805" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-160" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=1;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-153" target="WYC8DpWCvw_BZ1jIHr_j-159">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-153" value="ToBeAppliedProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1390" y="700" width="150" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-156" value="pendingRequest" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1360" y="745" width="120" height="30" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-164" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;exitX=0;exitY=0.5;exitDx=0;exitDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-159" target="WYC8DpWCvw_BZ1jIHr_j-163">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1588" y="720" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-165" value="1.11 写数据到内存数据库" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-164">
          <mxGeometry x="-0.5" y="-13" relative="1" as="geometry">
            <mxPoint x="-5" y="-41" as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-186" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-159" target="WYC8DpWCvw_BZ1jIHr_j-87">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-1490" y="494" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-187" value="1.12 发送响应给客户端" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-186">
          <mxGeometry x="0.0396" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-159" value="FinalProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1580" y="700" width="120" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-163" value="ZkDatabase" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1640" y="585" width="104" height="35" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-169" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=0;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-166" target="WYC8DpWCvw_BZ1jIHr_j-168">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-170" value="1.3 写事务日志" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-169">
          <mxGeometry x="-0.6419" y="-5" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-166" value="SyncRequestProcessor" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1570" y="805" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-168" value="磁盘上的事物日志&lt;br&gt;log.xxxxxx" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1640" y="880" width="140" height="40" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-171" value="ZooKeeper进程&lt;br&gt;（myid=2）" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-1050" y="960" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-181" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.5;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-174" target="WYC8DpWCvw_BZ1jIHr_j-177">
          <mxGeometry relative="1" as="geometry">
            <Array as="points">
              <mxPoint x="-700" y="1010" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-182" value="建立TCP连接" style="text;html=1;align=center;verticalAlign=middle;resizable=0;points=[];labelBackgroundColor=#ffffff;" vertex="1" connectable="0" parent="WYC8DpWCvw_BZ1jIHr_j-181">
          <mxGeometry x="-0.131" relative="1" as="geometry">
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-174" value="Socket" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-752" y="980" width="58" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-180" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0.5;entryY=1;entryDx=0;entryDy=0;" edge="1" parent="1" source="WYC8DpWCvw_BZ1jIHr_j-176" target="WYC8DpWCvw_BZ1jIHr_j-174">
          <mxGeometry relative="1" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-185" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;entryX=0;entryY=0.75;entryDx=0;entryDy=0;" edge="1" parent="1" target="WYC8DpWCvw_BZ1jIHr_j-61">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-560" y="1135" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="-560" y="1192" />
            </Array>
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-176" value="Socket" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-464" y="1115" width="58" height="20" as="geometry" />
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-183" style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" edge="1" parent="1" target="WYC8DpWCvw_BZ1jIHr_j-57">
          <mxGeometry relative="1" as="geometry">
            <mxPoint x="-515" y="1010" as="sourcePoint" />
          </mxGeometry>
        </mxCell>
        <mxCell id="WYC8DpWCvw_BZ1jIHr_j-177" value="ServerSocket" style="rounded=0;whiteSpace=wrap;html=1;" vertex="1" parent="1">
          <mxGeometry x="-480" y="996.5" width="90" height="27" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
